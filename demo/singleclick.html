<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>L.VisualClick with Leaflet.singleclick Demo</title>

  <meta name="viewport" id="vp" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" />


  <link rel="stylesheet" type="text/css" href="https://leafletjs-cdn.s3.amazonaws.com/content/leaflet/master/leaflet.css" />
  <script src="https://leafletjs-cdn.s3.amazonaws.com/content/leaflet/master/leaflet-src.js"></script>

  <link rel="stylesheet" type="text/css" href="../src/L.VisualClick.css" />
    <script src="../src/L.VisualClick.js"></script>
    <script src="../bower_components/Leaflet.singleclick/singleclick.js"></script>


  <style type="text/css">
    html,body{
      font-family: 'arial', sans-serif;
    }
    body{
      width: 100%; height: 100%; position: absolute; top: 0px; left; 0px; margin: 0px; padding: 0px;
    }

    #header{
      padding: 10px; box-sizing: border-box;
      background-color: #22ACFF;
      color: white;
    }
  </style>

</head>

<body>

    <div id="header">
      <h3>L.VisualClick with Leaflet.singleclick Demo</h3>
      <p>Just try to click or tap the map</p>
      <p>

        <button style="position: relative;" id="button-enable">Enable visual clicks</button>
        <button style="position: relative;" id="button-disable">Disable visual clicks</button>

      </p>
    </div>

    <div id="map" style="position: absolute; top: 150px; bottom: 0px; left: 0px; right: 0px;"></div>

    <script type="text/javascript">

        map = L.map('map',{
          //visualClick: false, //can be disabled
          //visualClickMode: 'touch', //A default detection is done, but you can override...
          visualClickEvents: 'click contextmenu' //can be multiple space-seperated events, like 'click', 'contextmenu', 'dblclick'...
        });

        var somewhere = L.latLng(63.41853193057004, 10.403741598129272);
        map.setView(somewhere, 15);

        var circle = L.circle(somewhere, 200).addTo(map);
        var marker = L.marker(somewhere, { interactive: false}).addTo(map);
        var polygonGeoJson = {"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[10.403280258178711,63.416786775485015],[10.41147708892822,63.41659472992294],[10.41128396987915,63.415720906373124],[10.39926767349243,63.416085802962115],[10.399610996246338,63.41690200220483],[10.403280258178711,63.416786775485015]]]}}]};

        var geoJson = L.geoJson( polygonGeoJson, { interactive: true}).addTo(map);

        map.toString = function(){ return "map"; };
        circle.toString = function(){ return "circle"; };
        geoJson.toString = function(){ return "geoJson"; };

        map.on('singleclick', function(ev){
            //stop singleclick event propagation to map, since we want to catch it here
            L.DomEvent.stop(ev);
            var latlng = ev.latlng;
            L.popup()
              .setLatLng(latlng)
              .setContent('<p>Hello MAP!<br />This is a nice popup on the map layer.</p>')
              .openOn(map);
        });

        geoJson.on('singleclick', function(ev){
            //stop singleclick event propagation to map, since we want to catch it here
            L.DomEvent.stop(ev);
            var latlng = ev.latlng;
            L.popup()
              .setLatLng(latlng)
              .setContent('<p>Hello GeoJSON!<br />This is a nice popup on geoJson layer.</p>')
              .openOn(map);
        });

        //marker.on('singleclick', function(){ console.log('singleclick')} );

        L.tileLayer("http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png", {
           "attribution": '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'
        }).addTo(map);

        L.DomEvent.on(document.querySelector('#button-enable'), 'click', function(){
          map.visualClick.enable();
        });

        L.DomEvent.on(document.querySelector('#button-disable'), 'click', function(){
          map.visualClick.disable();
        });

     </script>

</body>


</html>